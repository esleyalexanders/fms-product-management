<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Staff - Manage Team</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../home-styles.css">
    <style>
        .form-container { max-width:800px; margin:0 auto; background:#fff; border-radius:8px; padding:24px; }
        .form-tabs { display:flex; border-bottom:1px solid #e5e7eb; margin-bottom:24px; }
        .tab-btn { padding:12px 24px; border:none; background:none; cursor:pointer; font-size:15px; font-weight:500; color:#6b7280; border-bottom:2px solid transparent; }
        .tab-btn.active { color:#6366f1; border-bottom-color:#6366f1; }
        .tab-content { display:none; }
        .tab-content.active { display:block; }
        .form-section { margin-bottom:32px; }
        .form-section h3 { font-size:18px; font-weight:600; margin-bottom:16px; color:#374151; }
        .form-row { display:flex; gap:16px; margin-bottom:16px; }
        .form-row .form-group { flex:1; }
        .form-group label { display:block; font-size:14px; font-weight:500; margin-bottom:6px; color:#374151; }
        .form-group input, .form-group select, .form-group textarea { width:100%; padding:10px 12px; border:1px solid #d1d5db; border-radius:6px; font-size:15px; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline:none; border-color:#6366f1; box-shadow:0 0 0 3px rgba(99,102,241,0.1); }
        .required { color:#dc2626; }
        .form-actions { display:flex; gap:12px; justify-content:flex-end; padding-top:24px; border-top:1px solid #e5e7eb; }
        .btn-primary, .btn-secondary { font-family:inherit; font-size:15px; border-radius:6px; padding:10px 20px; border:none; cursor:pointer; }
        .btn-primary { background:#6366f1; color:#fff; }
        .btn-secondary { background:#e5e7eb; color:#374151; }
        .photo-upload { display:flex; align-items:center; gap:16px; margin-bottom:16px; }
        .photo-preview { width:80px; height:80px; border-radius:50%; background:#f3f4f6; display:flex; align-items:center; justify-content:center; color:#6b7280; font-size:24px; }
        .photo-preview img { width:100%; height:100%; border-radius:50%; object-fit:cover; }
        .upload-btn { padding:8px 16px; border:1px solid #d1d5db; border-radius:6px; background:#fff; cursor:pointer; }
        .error-message { color:#dc2626; font-size:14px; margin-top:4px; }
        .sidebar .nav-item.manage-team-link { background:#eef2ff; color:#6366f1; font-weight:600; }
        .avail-day { border:1px dashed #e6e9ee; padding:8px; border-radius:6px; margin-bottom:8px; }
        .avail-day-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
        .range-row { display:flex; gap:8px; align-items:center; margin-bottom:8px; flex-wrap:wrap; }
        .range-to { color:#6b7280; font-size:14px; }
        .blocked-row { display:flex; gap:8px; align-items:center; margin-bottom:8px; flex-wrap:wrap; }
        .availability-controls { display:flex; flex-direction:column; gap:8px; }
        .weekday-preset { display:flex; flex-direction:column; gap:4px; }
        .preset-inputs { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
        .availability-hint { margin-top:4px; }
        .scheduling-section { background:#f9fafb; border:1px solid #e5e7eb; border-radius:8px; padding:20px; margin-top:16px; }
        .scheduling-subsection { margin-bottom:24px; }
        .scheduling-subsection:last-child { margin-bottom:0; }
        .subsection-header { display:flex; align-items:center; gap:8px; margin-bottom:12px; padding-bottom:8px; border-bottom:2px solid #e5e7eb; }
        .subsection-header i { color:#6366f1; font-size:18px; }
        .subsection-header h4 { margin:0; font-size:16px; font-weight:600; color:#374151; }
        .subsection-description { font-size:13px; color:#6b7280; margin-bottom:12px; }
        .preset-card { background:#fff; border:1px solid #e5e7eb; border-radius:6px; padding:12px; margin-bottom:12px; }
        .preset-card-header { font-size:14px; font-weight:500; color:#374151; margin-bottom:8px; }
        .avail-day { border:1px solid #e5e7eb; padding:12px; border-radius:6px; margin-bottom:8px; background:#fff; box-shadow:0 1px 2px rgba(0,0,0,0.05); }
        .avail-day-header strong { font-size:14px; color:#374151; text-transform:capitalize; }
        .btn-add-small { font-size:13px; padding:4px 10px; }
        .form-grid-2 { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
        .info-badge { display:inline-flex; align-items:center; gap:4px; background:#dbeafe; color:#1e40af; padding:4px 8px; border-radius:4px; font-size:12px; font-weight:500; }
        .info-badge i { font-size:10px; }
        .constraint-group { background:#fff; border:1px solid #e5e7eb; border-radius:6px; padding:12px; }
        .checkbox-group { display:flex; flex-direction:column; gap:8px; }
        .checkbox-label { display:flex; align-items:center; gap:8px; font-size:14px; cursor:pointer; }
        .checkbox-label input[type="checkbox"] { width:18px; height:18px; cursor:pointer; }
        @media (max-width:768px) {
            .avail-day-header { flex-direction:column; align-items:flex-start; gap:8px; }
            .range-row, .blocked-row { flex-direction:column; align-items:stretch; }
            .range-row input, .blocked-row input { width:100%; }
            .preset-inputs { flex-direction:column; align-items:stretch; gap:4px; }
            .preset-inputs input { width:100%; }
            .form-grid-2 { grid-template-columns:1fr; }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-store"></i>
                    <div class="logo-text-wrapper">
                        <span class="logo-text" id="storeName">My Store</span>
                    </div>
                </div>
            </div>
            <div class="sidebar-nav">
                <div class="nav-section-label">MAIN</div>
                <a href="../home.html" class="nav-item" style="text-decoration: none; color: inherit;"><i class="fas fa-home"></i><span>Home</span></a>
                <a href="../quotes.html" class="nav-item" style="text-decoration: none; color: inherit;"><i class="fas fa-file-contract"></i><span>Quotes</span></a>
                <a href="../tenant_schedule.html" class="nav-item" style="text-decoration: none; color: inherit;"><i class="fas fa-calendar-alt"></i><span>Schedule</span></a>
                <a href="manage-team.html" class="nav-item manage-team-link" style="text-decoration: none; color: inherit;"><i class="fas fa-users"></i><span>Manage team</span></a>
                <a href="../admin/pricebook.html" class="nav-item" style="text-decoration: none; color: inherit;"><i class="fas fa-book"></i><span>My pricebook</span></a>
                <a href="../Customer Management/customer-list.html" class="nav-item" style="text-decoration: none; color: inherit;"><i class="fas fa-user-friends"></i><span>Customers</span></a>
            <div class="sidebar-footer">
                <div class="nav-item">
                    <i class="fas fa-question-circle"></i>
                    <span>Get Set Up</span>
                </div>
                <div class="nav-item">
                    <i class="fas fa-cog"></i>
                    <span>Settings</span>
                </div>
            </div>
        </nav>
        <!-- Main Content Area -->
        <main class="main-content">
            <header class="top-header">
                <div class="header-left">
                    <h1 class="page-title">Add Staff Member</h1>
                    <p class="page-subtitle">Create a new staff account with roles and permissions</p>
                </div>
                <div class="header-right">
                    <a href="manage-team.html" style="text-decoration:none;"><button class="btn-secondary"><i class="fas fa-arrow-left"></i> Back to Team</button></a>
                </div>
            </header>
            <div class="content-wrapper">
                <div class="form-container">
                    <div class="form-tabs">
                        <button class="tab-btn active" data-tab="personal">Personal Info</button>
                        <button class="tab-btn" data-tab="employment">Employment & Scheduling</button>
                    </div>

                    <form id="staffForm">
                        <!-- Personal Information Tab -->
                        <div class="tab-content active" id="personal-tab">
                            <div class="form-section">
                                <h3>Personal Information</h3>
                                <div class="photo-upload">
                                    <div class="photo-preview" id="photoPreview">
                                        <i class="fas fa-user"></i>
                                    </div>
                                    <div>
                                        <input type="file" id="profilePhoto" accept="image/*" style="display:none;">
                                        <button type="button" class="upload-btn" onclick="document.getElementById('profilePhoto').click()">
                                            <i class="fas fa-upload"></i> Upload Photo
                                        </button>
                                        <div style="font-size:12px; color:#6b7280; margin-top:4px;">Optional. Max 5MB, JPG/PNG</div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="firstName">First Name <span class="required">*</span></label>
                                        <input type="text" id="firstName" required>
                                        <div class="error-message" id="firstNameError"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="lastName">Last Name <span class="required">*</span></label>
                                        <input type="text" id="lastName" required>
                                        <div class="error-message" id="lastNameError"></div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="email">Email <span class="required">*</span></label>
                                        <input type="email" id="email" required>
                                        <div class="error-message" id="emailError"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="phone">Phone Number <span class="required">*</span></label>
                                        <input type="tel" id="phone" required>
                                        <div class="error-message" id="phoneError"></div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="dateOfBirth">Date of Birth</label>
                                        <input type="date" id="dateOfBirth">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Employment Information Tab -->
                        <div class="tab-content" id="employment-tab">
                            <div class="form-section">
                                <h3>Employment Information</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="employeeId">Employee ID</label>
                                        <input type="text" id="employeeId">
                                        <div class="error-message" id="employeeIdError"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="startDate">Start Date <span class="required">*</span></label>
                                        <input type="date" id="startDate" required>
                                        <div class="error-message" id="startDateError"></div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="employmentType">Employment Type <span class="required">*</span></label>
                                        <select id="employmentType" required>
                                            <option value="">Select Type</option>
                                            <option value="full-time">Full-time</option>
                                            <option value="part-time">Part-time</option>
                                            <option value="contractor">Contractor</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="hourlyRate">Hourly Rate/Salary</label>
                                        <input type="number" id="hourlyRate" step="0.01" min="0">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="role">Role <span class="required">*</span></label>
                                        <select id="role" required>
                                            <option value="">Select Role</option>
                                            <option value="Manager">Manager</option>
                                            <option value="Staff">Staff</option>
                                        </select>
                                        <div class="error-message" id="roleError"></div>
                                        <div style="font-size:12px; color:#6b7280; margin-top:4px;">
                                            <i class="fas fa-info-circle"></i> Need to add or edit roles? Go to <a href="manage-team-roles.html" style="color:#6366f1; text-decoration:underline;">Manage Roles</a>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="jobTitle">Job Title (Optional)</label>
                                        <input type="text" id="jobTitle" placeholder="e.g. Senior HVAC Technician, Lead Installer">
                                        <div style="font-size:12px; color:#6b7280; margin-top:4px;">Specific job title for this staff member</div>
                                    </div>
                                </div>

                                <!-- Scheduling & Availability -->
                                <div class="form-section">
                                    <h3><i class="fas fa-calendar-check"></i> Scheduling & Availability</h3>
                                    <div class="subsection-description">Configure staff member's work schedule, availability, and scheduling preferences</div>

                                    <div class="scheduling-section">
                                        <!-- Basic Info -->
                                        <div class="scheduling-subsection">
                                            <div class="subsection-header">
                                                <i class="fas fa-map-marker-alt"></i>
                                                <h4>Basic Information</h4>
                                            </div>
                                            <div class="form-grid-2">
                                                <div class="form-group">
                                                    <label for="locations"><i class="fas fa-building"></i> Assigned Locations</label>
                                                    <input type="text" id="locations" placeholder="e.g. Main St, East Branch, Downtown">
                                                    <div style="font-size:12px; color:#6b7280; margin-top:4px;">Separate multiple locations with commas</div>
                                                </div>
                                                <div class="form-group">
                                                    <label for="skills"><i class="fas fa-tools"></i> Skills & Certifications</label>
                                                    <input type="text" id="skills" placeholder="e.g. HVAC, Electrical, Plumbing">
                                                    <div style="font-size:12px; color:#6b7280; margin-top:4px;">Separate multiple skills with commas</div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Weekly Availability -->
                                        <div class="scheduling-subsection">
                                            <div class="subsection-header">
                                                <i class="fas fa-clock"></i>
                                                <h4>Weekly Availability</h4>
                                                <span class="info-badge"><i class="fas fa-info-circle"></i> Define when this staff member is available to work</span>
                                            </div>
                                            
                                            <div class="preset-card">
                                                <div class="preset-card-header"><i class="fas fa-magic"></i> Quick Setup - Weekday Preset</div>
                                                <div class="preset-inputs">
                                                    <input type="time" id="weekdayPresetStart" value="09:00">
                                                    <span class="range-to">to</span>
                                                    <input type="time" id="weekdayPresetEnd" value="17:00">
                                                    <button type="button" id="applyWeekdayPreset" class="btn-secondary"><i class="fas fa-bolt"></i> Apply to Mon–Fri</button>
                                                </div>
                                                <div style="font-size:12px; color:#6b7280; margin-top:8px;">Set a standard time range and apply it to all weekdays at once</div>
                                            </div>

                                            <div id="availabilityContainer">
                                                <!-- per-day availability lists inserted here by JS -->
                                            </div>
                                        </div>

                                        <!-- Time Off & Constraints -->
                                        <div class="scheduling-subsection">
                                            <div class="subsection-header">
                                                <i class="fas fa-ban"></i>
                                                <h4>Time Off & Work Constraints</h4>
                                            </div>
                                            
                                            <div style="margin-bottom:16px;">
                                                <label style="font-weight:500; margin-bottom:8px; display:block;"><i class="fas fa-umbrella-beach"></i> Blocked Date Ranges (vacation / leave)</label>
                                                <div id="blockedContainer"></div>
                                                <button type="button" id="addBlockedBtn" class="btn-secondary" style="margin-top:8px;"><i class="fas fa-plus"></i> Add blocked date range</button>
                                            </div>

                                            <div class="constraint-group">
                                                <label style="font-weight:500; margin-bottom:12px; display:block;"><i class="fas fa-sliders-h"></i> Work Hour Constraints</label>
                                                <div class="form-grid-2">
                                                    <div class="form-group">
                                                        <label for="maxHoursPerWeek">Maximum hours per week</label>
                                                        <input type="number" id="maxHoursPerWeek" min="0" placeholder="e.g. 40">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="maxConsecutiveDays">Maximum consecutive days</label>
                                                        <input type="number" id="maxConsecutiveDays" min="0" placeholder="e.g. 5">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="minShiftLengthMins">Minimum shift length (minutes)</label>
                                                        <input type="number" id="minShiftLengthMins" min="0" placeholder="e.g. 120">
                                                    </div>
                                                    <div class="form-group">
                                                        <label for="shiftPaddingMins">Shift padding / travel buffer (minutes)</label>
                                                        <input type="number" id="shiftPaddingMins" min="0" placeholder="e.g. 30">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Preferences & Settings -->
                                        <div class="scheduling-subsection">
                                            <div class="subsection-header">
                                                <i class="fas fa-cog"></i>
                                                <h4>Scheduling Preferences</h4>
                                            </div>
                                            
                                            <div class="form-row">
                                                <div class="form-group">
                                                    <label for="homeBaseType"><i class="fas fa-home"></i> Home Base Location</label>
                                                    <select id="homeBaseType" style="margin-bottom:8px;">
                                                        <option value="store">Use Store Address</option>
                                                        <option value="custom">Custom Address</option>
                                                    </select>
                                                    <input type="text" id="homeBase" placeholder="Enter custom address" style="display:none;">
                                                    <div id="storeAddressDisplay" style="font-size:13px; color:#374151; padding:8px; background:#f3f4f6; border-radius:4px; margin-top:4px;">
                                                        <strong>Store Address:</strong><br>
                                                        <span id="storeAddressText">123 Main Street, Springfield, IL 62701</span>
                                                    </div>
                                                    <div style="font-size:12px; color:#6b7280; margin-top:4px;">Starting location for route planning and job assignments</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div style="margin-top:16px;">
                                    <label style="display:flex; align-items:center; gap:8px; font-weight:500;">
                                        <input type="checkbox" id="sendInvite" checked>
                                        Send invitation email to staff member
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="button" class="btn-secondary" onclick="window.location.href='manage-team.html'">Cancel</button>
                            <button type="submit" class="btn-primary">Create Staff Member</button>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>
    <script src="manage-team-create-script.js"></script>
</body>
</html>